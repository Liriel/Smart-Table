/** 
* @version 2.1.8
* @license MIT
*/
/** 
* @version 2.1.8
* @license MIT
*/
!function(t,e){"use strict";t.module("smart-table",[]).run(["$templateCache",function(t){t.put("template/smart-table/pagination.html",'<nav ng-if="numPages && pages.length >= 2"><ul class="pagination"><li ng-repeat="page in pages" ng-class="{active: page==currentPage}"><a href="javascript: void(0);" ng-click="selectPage(page)">{{page}}</a></li></ul></nav>')}]),t.module("smart-table").constant("stConfig",{pagination:{template:"template/smart-table/pagination.html",itemsByPage:10,displayedPages:5},search:{delay:400,inputEvent:"input"},select:{mode:"single",selectedClass:"st-selected"},sort:{ascentClass:"st-sort-ascent",descentClass:"st-sort-descent",descendingFirst:!1,skipNatural:!1,delay:300},pipe:{delay:100}}),t.module("smart-table").controller("stTableController",["$scope","$parse","$filter","$attrs",function(s,n,r,a){function i(t){return t?[].concat(t):[]}function l(){m=i(o(s)),v===!0&&C.pipe()}function c(t,e){if(-1!=e.indexOf(".")){var s=e.split("."),r=s.pop(),a=s.join("."),i=n(a)(t);delete i[r],0==Object.keys(i).length&&c(t,a)}else delete t[e]}var o,u,d,p=a.stTable,f=n(p),g=f.assign,S=r("orderBy"),h=r("filter"),m=i(f(s)),b={sort:{},search:{},pagination:{start:0,totalItemCount:0}},v=!0,C=this;a.stSafeSrc&&(o=n(a.stSafeSrc),s.$watch(function(){var t=o(s);return t&&t.length?t[0]:e},function(t,e){t!==e&&l()}),s.$watch(function(){var t=o(s);return t?t.length:0},function(t){t!==m.length&&l()}),s.$watch(function(){return o(s)},function(t,e){t!==e&&(b.pagination.start=0,l())})),this.sortBy=function(e,s){return b.sort.predicate=e,b.sort.reverse=s===!0,t.isFunction(e)?b.sort.functionName=e.name:delete b.sort.functionName,b.pagination.start=0,this.pipe()},this.search=function(e,s){var r=b.search.predicateObject||{},a=s?s:"$";return e=t.isString(e)?e.trim():e,n(a).assign(r,e),e||c(r,a),b.search.predicateObject=r,b.pagination.start=0,this.pipe()},this.pipe=function(){var t,n=b.pagination;u=b.search.predicateObject?h(m,b.search.predicateObject):m,b.sort.predicate&&(u=S(u,b.sort.predicate,b.sort.reverse)),n.totalItemCount=u.length,n.number!==e&&(n.numberOfPages=u.length>0?Math.ceil(u.length/n.number):1,n.start=n.start>=u.length?(n.numberOfPages-1)*n.number:n.start,t=u.slice(n.start,n.start+parseInt(n.number))),g(s,t||u)},this.select=function(t,n){var r=i(f(s)),a=r.indexOf(t);-1!==a&&("single"===n?(t.isSelected=t.isSelected!==!0,d&&(d.isSelected=!1),d=t.isSelected===!0?t:e):r[a].isSelected=!r[a].isSelected)},this.slice=function(t,e){return b.pagination.start=t,b.pagination.number=e,this.pipe()},this.tableState=function(){return b},this.getFilteredCollection=function(){return u||m},this.setFilterFunction=function(t){h=r(t)},this.setSortFunction=function(t){S=r(t)},this.preventPipeOnWatch=function(){v=!1}}]).directive("stTable",function(){return{restrict:"A",controller:"stTableController",link:function(t,e,s,n){s.stSetFilter&&n.setFilterFunction(s.stSetFilter),s.stSetSort&&n.setSortFunction(s.stSetSort)}}}),t.module("smart-table").directive("stSort",["stConfig","$parse","$timeout",function(s,n,r){return{restrict:"A",require:"^stTable",link:function(a,i,l,c){function o(){b?f=0===f?2:f-1:f++;var e;d=t.isFunction(p(a))||t.isArray(p(a))?p(a):l.stSort,f%3===0&&!!m!=!0?(f=0,c.tableState().sort={},c.tableState().pagination.start=0,e=c.pipe.bind(c)):e=c.sortBy.bind(c,d,f%2===0),null!==v&&r.cancel(v),0>C?e():v=r(e,C)}var u,d=l.stSort,p=n(d),f=0,g=l.stClassAscent||s.sort.ascentClass,S=l.stClassDescent||s.sort.descentClass,h=[g,S],m=l.stSkipNatural!==e?l.stSkipNatural:s.sort.skipNatural,b=l.stDescendingFirst!==e?l.stDescendingFirst:s.sort.descendingFirst,v=null,C=l.stDelay||s.sort.delay;l.stSortDefault&&(u=a.$eval(l.stSortDefault)!==e?a.$eval(l.stSortDefault):l.stSortDefault),i.bind("click",function(){d&&a.$apply(o)}),u&&(f="reverse"===u?1:0,o()),a.$watch(function(){return c.tableState().sort},function(t){t.predicate!==d?(f=0,i.removeClass(g).removeClass(S)):(f=t.reverse===!0?2:1,i.removeClass(h[f%2]).addClass(h[f-1]))},!0)}}}]),t.module("smart-table").directive("stSelectRowEx",["stConfig",function(t){return{restrict:"A",require:"^stTable",scope:{row:"=stSelectRow",rowsSelected:"=?stSelectRowsSelected",enabled:"=?stSelectEnabled"},link:function(e,s,n,r){var a=n.stSelectMode||t.select.mode;s.bind("click",function(){e.$apply(function(){e.enabled!==!1&&r.select(e.row,a)})}),e.$watch("row.isSelected",function(n){n===!0?(s.addClass(t.select.selectedClass),e.rowsSelected&&e.rowsSelected.push(e.row)):(s.removeClass(t.select.selectedClass),e.rowsSelected&&-1!==e.rowsSelected.indexOf(e.row)&&e.rowsSelected.splice(e.rowsSelected.indexOf(e.row),1))}),e.$watch("enabled",function(t){t===!1&&(e.row.isSelected=!1)})}}}])}(angular);
//# sourceMappingURL=smart-table.min.js.map
